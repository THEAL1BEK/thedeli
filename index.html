<section id="banner">
    <a href="#" id="shop-now-btn">SHOP NOW</a>
</section>

<div id="menu-overlay">
    <div class="close-btn" id="menu-close"><span>&times;</span></div>
    <ul>
        <li id="home">Home</li>
        <li id="new-in">New In</li>
        <li id="women">Women</li>
        <li id="men">Men</li>
        <li id="winter">Winter</li>
        <li>Gifts</li>
        <li id="contact">Contact</li>
    </ul>
</div>

<div id="filter-overlay">
    <div id="filter-header">
        <span>FILTER</span>
        <span id="reset-all">Reset All</span>
    </div>
    <div class="close-btn" id="filter-close"><span>&times;</span></div>
    <ul>
        <li class="filter-option" id="filter-gender">Gender
            <ul class="filter-suboptions" id="gender-suboptions">
                <li id="filter-all">All</li>
                <li id="filter-women">Women</li>
                <li id="filter-men">Men</li>
            </ul>
        </li>
        <li class="filter-option" id="filter-color">Color
            <div id="color-suboptions" style="display: none;">
                <div class="color-option">
                    <div class="color-circle" style="background-color: black;" data-color="black"></div>
                    Black
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: brown;" data-color="brown"></div>
                    Brown
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: gold;" data-color="gold"></div>
                    Gold
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: silver;" data-color="silver"></div>
                    Silver
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: grey;" data-color="grey"></div>
                    Grey
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: blue;" data-color="blue"></div>
                    Blue
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: #800020;" data-color="bordeaux"></div>
                    Bordeaux
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: green;" data-color="green"></div>
                    Green
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: white;" data-color="white"></div>
                    White
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: orange;" data-color="orange"></div>
                    Orange
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: red;" data-color="red"></div>
                    Red
                </div>
                <div class="color-option">
                    <div class="color-circle" style="background-color: yellow;" data-color="yellow"></div>
                    Yellow
                </div>
            </div>
        </li>
    </ul>
</div>

<div id="contact-overlay">
    <div class="close-btn" id="contact-close"><span>&times;</span></div>
    <ul>
        <li id="wa-me-chat">wa.me chat</li>
    </ul>
</div>

<div id="catalog">
    <div class="filter-sort">
        <span id="filter-btn">Filter</span>
        <span id="sort-btn">Sort by</span>
        <div id="sort-options">
            <div id="sort-relevance">Relevance</div>
            <div id="sort-high-to-low">Price: High to Low</div>
            <div id="sort-low-to-high">Price: Low to High</div>
        </div>
    </div>
    <div class="catalog-grid" id="catalog-grid"></div>
</div>

<div id="product-overlay">
    <div class="product-images" id="image-container"></div>
    <div class="product-details">
        <div class="product-title" id="product-title"></div>
        <div class="product-price" id="product-price"></div>
    </div>
    <div class="product-actions">
        <button class="order-btn" id="order-btn">Order</button>
        <button class="back-btn" id="back-btn">Back</button>
    </div>
</div>

<script>
// === данные товаров ===
const products = [
    { name: "Cat Eye Glasses", price: 149, images: ["IMG_8125.JPG","IMG_8125.JPG","IMG_8125.JPG"], gender: "women", winter: false, newIn: false, color: "black" },
    { name: "Elegant Eyewear", price: 119, images: ["IMG_8125.JPG","IMG_8125.JPG","IMG_8125.JPG"], gender: "women", winter: false, newIn: false, color: "brown" },
    { name: "Stylish Goggles", price: 129, images: ["IMG_8125.JPG","IMG_8125.JPG","IMG_8125.JPG"], gender: "women", winter: false, newIn: true, color: "gold" },
    { name: "Black Sunglasses", price: 99, images: ["IMG_8125.JPG","IMG_8125.JPG","IMG_8125.JPG"], gender: "men", winter: true, newIn: false, color: "silver" },
    { name: "Sporty Shades", price: 89, images: ["IMG_8125.JPG","IMG_8125.JPG","IMG_8125.JPG"], gender: "men", winter: true, newIn: false, color: "grey" },
    { name: "Classic Aviators", price: 109, images: ["IMG_8125.JPG","IMG_8125.JPG","IMG_8125.JPG"], gender: "men", winter: true, newIn: true, color: "blue" }
];

let currentFilters = { gender: 'all', category: null, color: null };

// === элементы ===
const menuIcon = document.getElementById('menu-icon');
const menuOverlay = document.getElementById('menu-overlay');
const menuClose = document.getElementById('menu-close');

const shopNowBtn = document.getElementById('shop-now-btn');
const banner = document.getElementById('banner');
const catalog = document.getElementById('catalog');

const filterBtn = document.getElementById('filter-btn');
const filterOverlay = document.getElementById('filter-overlay');
const filterCloseBtn = document.getElementById('filter-close');

const sortBtn = document.getElementById('sort-btn');
const sortOptions = document.getElementById('sort-options');

const contactItem = document.getElementById('contact');
const contactOverlay = document.getElementById('contact-overlay');
const contactCloseBtn = document.getElementById('contact-close');
const waMeChat = document.getElementById('wa-me-chat');

const catalogGrid = document.getElementById('catalog-grid');

const productOverlay = document.getElementById('product-overlay');
const productTitle = document.getElementById('product-title');
const productPrice = document.getElementById('product-price');
const imageContainer = document.getElementById('image-container');

const backBtn = document.getElementById('back-btn');
const orderBtn = document.getElementById('order-btn');

const filterColor = document.getElementById('filter-color');
const colorSuboptions = document.getElementById('color-suboptions');
const genderSuboptions = document.getElementById('gender-suboptions');
const resetAll = document.getElementById('reset-all');

// === функции отображения каталога и товара ===
function renderCatalog() {
    catalogGrid.innerHTML = '';
    products.forEach((product, index) => {
        const item = document.createElement('div');
        item.className = 'catalog-item';
        item.dataset.gender = product.gender;
        item.dataset.winter = product.winter;
        item.dataset.new = product.newIn;
        item.dataset.index = index;
        item.dataset.color = product.color;
        item.innerHTML = `
            <img src="${product.images[0]}" alt="${product.name}" onerror="this.style.display='none'">
            <div class="item-text">${product.name}<br>$${product.price}</div>
        `;
        item.addEventListener('click', () => showProductDetails(index));
        catalogGrid.appendChild(item);
    });
}

function showProductDetails(index) {
    const product = products[index];
    if (!product) return;
    productTitle.textContent = product.name;
    productPrice.textContent = `$${product.price}`;
    imageContainer.innerHTML = '';
    product.images.forEach(src => {
        const img = document.createElement('img');
        img.className = 'product-image';
        img.src = src;
        img.alt = product.name;
        img.onerror = () => img.style.display = 'none';
        imageContainer.appendChild(img);
    });
    productOverlay.style.display = 'flex';
    catalog.style.display = 'none';
    productOverlay.scrollTop = 0;
}

// === применение фильтров ===
function applyFilters() {
    const items = document.querySelectorAll('.catalog-item');
    items.forEach(item => {
        const product = products[item.dataset.index];
        let show = true;
        if (currentFilters.gender !== 'all' && product.gender !== currentFilters.gender) show = false;
        if (currentFilters.color && product.color !== currentFilters.color) show = false;
        if (currentFilters.category && item.dataset[currentFilters.category] !== 'true') show = false;
        item.style.display = show ? 'block' : 'none';
    });
}

// === навигация / фильтрация ===
function handleMenuNavigation(filterType) {
    currentFilters.color = null; // Reset color when navigating from menu
    if (filterType === 'all') {
        currentFilters.gender = 'all';
        currentFilters.category = null;
    } else if (filterType === 'women' || filterType === 'men') {
        currentFilters.gender = filterType;
        currentFilters.category = null;
    } else if (filterType === 'new' || filterType === 'winter') {
        currentFilters.category = filterType;
        currentFilters.gender = 'all';
    }
    renderCatalog();
    applyFilters();
    productOverlay.style.display = 'none';
    banner.style.display = 'none';
    catalog.style.display = 'block';
    menuOverlay.style.display = 'none';
}

// === обработчики ===
menuIcon.addEventListener('click', () => { menuOverlay.style.display = 'flex'; });
menuClose.addEventListener('click', () => { menuOverlay.style.display = 'none'; });

document.getElementById('home').addEventListener('click', () => {
    productOverlay.style.display = 'none';
    catalog.style.display = 'none';
    banner.style.display = 'block';
    menuOverlay.style.display = 'none';
});
document.getElementById('new-in').addEventListener('click', () => handleMenuNavigation('new'));
document.getElementById('women').addEventListener('click', () => handleMenuNavigation('women'));
document.getElementById('men').addEventListener('click', () => handleMenuNavigation('men'));
document.getElementById('winter').addEventListener('click', () => handleMenuNavigation('winter'));

shopNowBtn.addEventListener('click', (e) => {
    e.preventDefault();
    banner.style.display = 'none';
    catalog.style.display = 'block';
    renderCatalog();
    applyFilters();
});

filterBtn.addEventListener('click', () => { filterOverlay.style.display = 'block'; });
filterCloseBtn.addEventListener('click', () => {
    filterOverlay.style.display = 'none';
    genderSuboptions.style.display = 'none';
    colorSuboptions.style.display = 'none';
});

document.getElementById('filter-all').addEventListener('click', () => { 
    currentFilters.gender = 'all'; 
    applyFilters(); 
    filterOverlay.style.display = 'none'; 
    genderSuboptions.style.display = 'none'; 
    colorSuboptions.style.display = 'none'; 
});
document.getElementById('filter-women').addEventListener('click', () => { 
    currentFilters.gender = 'women'; 
    applyFilters(); 
    filterOverlay.style.display = 'none'; 
    genderSuboptions.style.display = 'none'; 
    colorSuboptions.style.display = 'none'; 
});
document.getElementById('filter-men').addEventListener('click', () => { 
    currentFilters.gender = 'men'; 
    applyFilters(); 
    filterOverlay.style.display = 'none'; 
    genderSuboptions.style.display = 'none'; 
    colorSuboptions.style.display = 'none'; 
});

const filterGender = document.getElementById('filter-gender');
filterGender.addEventListener('click', () => { 
    genderSuboptions.style.display = (genderSuboptions.style.display === 'block') ? 'none' : 'block'; 
    colorSuboptions.style.display = 'none'; 
});

filterColor.addEventListener('click', () => { 
    colorSuboptions.style.display = (colorSuboptions.style.display === 'block') ? 'none' : 'block'; 
    genderSuboptions.style.display = 'none'; 
});

document.querySelectorAll('.color-option').forEach(option => {
    option.addEventListener('click', () => {
        const selectedColor = option.querySelector('.color-circle').getAttribute('data-color');
        currentFilters.color = selectedColor;
        applyFilters();
        colorSuboptions.style.display = 'none';
        filterOverlay.style.display = 'none';
    });
});

resetAll.addEventListener('click', () => {
    currentFilters = { gender: 'all', category: null, color: null };
    applyFilters();
    genderSuboptions.style.display = 'none';
    colorSuboptions.style.display = 'none';
    filterOverlay.style.display = 'none';
});

// сортировка
function showAllItems() { document.querySelectorAll('.catalog-item').forEach(i => i.style.display = 'block'); }
document.getElementById('sort-relevance').addEventListener('click', () => { showAllItems(); sortOptions.style.display = 'none'; });

document.getElementById('sort-high-to-low').addEventListener('click', () => {
    const items = Array.from(document.querySelectorAll('.catalog-item'));
    items.sort((a, b) => parseInt(b.querySelector('.item-text').textContent.split('`\(')[1]) - parseInt(a.querySelector('.item-text').textContent.split('\)`')[1]));
    items.forEach(i => catalogGrid.appendChild(i));
    sortOptions.style.display = 'none';
});
document.getElementById('sort-low-to-high').addEventListener('click', () => {
    const items = Array.from(document.querySelectorAll('.catalog-item'));
    items.sort((a, b) => parseInt(a.querySelector('.item-text').textContent.split('`\(')[1]) - parseInt(b.querySelector('.item-text').textContent.split('\)`')[1]));
    items.forEach(i => catalogGrid.appendChild(i));
    sortOptions.style.display = 'none';
});

sortBtn.addEventListener('click', (e) => { e.stopPropagation(); sortOptions.style.display = (sortOptions.style.display === 'block') ? 'none' : 'block'; });
document.addEventListener('click', (e) => { if (!sortBtn.contains(e.target) && !sortOptions.contains(e.target)) sortOptions.style.display = 'none'; });

// контакт
contactItem.addEventListener('click', () => { contactOverlay.style.display = 'flex'; menuOverlay.style.display = 'none'; });
contactCloseBtn.addEventListener('click', () => { contactOverlay.style.display = 'none'; });
waMeChat.addEventListener('click', () => { window.location.href = 'https://wa.me/77470383524'; });

// кнопки товара
backBtn.addEventListener('click', () => { productOverlay.style.display = 'none'; catalog.style.display = 'block'; });
orderBtn.addEventListener('click', () => { window.location.href = 'https://wa.me/77470383524'; });

window.addEventListener('error', (ev) => { /* console.error(ev.message) */ });
</script>
